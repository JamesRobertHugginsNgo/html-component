(()=>{"use strict";const i={};function t(t=""){return i[t]||(i[t]=0),`${t}${i[t]++}`}const n={};function e(i,t){n[i]=t}e("text",{build:({id:i=t("text-"),title:n})=>({htmlStringDefinition:[{id:i,name:"div",attributes:{id:`${i}-field`},children:[{name:"label",attributes:{for:i},children:[n||"Untitled"]},{name:"input",attributes:{id:i,name:i,type:"text"}}]}],initializer:{id:i}}),initialize(i,t={}){console.log("text",i.id),t[i.id]="text"}}),e("section",{build:({id:i=t("section-"),title:n,fields:e=[]})=>({htmlStringDefinition:{id:i,name:"div",attributes:{id:i},children:[n?{name:"h2",children:[n]}:null,e]},initializer:{id:i,fields:e}}),initialize(i,t={}){console.log("section",i.id),t[i.id]="section"}}),e("form",{build:({id:i=t("form-"),title:n,sections:e=[]})=>({htmlStringDefinition:{id:i,name:"form",attributes:{id:i},children:[n?{name:"h1",children:[n]}:null,...e]},initializer:{id:i,sections:e}}),initialize(i,t){console.log("form",i.id),t[i.id]="form"}});const{htmlStringDefinition:o,initializers:l}=function i(t={}){if(Array.isArray(t)){const n=[],e=[],o=t.length;for(let l=0;l<o;l++){const{htmlStringDefinition:o,initializers:r}=i(t[l]);n.push(o),e.push(...r)}return{htmlStringDefinition:n,initializers:e}}if(t&&"object"==typeof t){const{type:e}=t;if(e){const{htmlStringDefinition:o,initializer:l={}}=n[e].build(t);Object.assign(t,l);const{htmlStringDefinition:r,initializers:s}=i(o);return{htmlStringDefinition:r,initializers:[...s,t]}}const{children:o}=t;if(o){const{htmlStringDefinition:n,initializers:e}=i(o);return{htmlStringDefinition:{...t,children:n},initializers:e}}}return{htmlStringDefinition:t,initializers:[]}}({type:"form",title:"Form Title",sections:[{type:"section",title:"Section Title",fields:[{type:"text",title:"Text Label 1"},{type:"text",title:"Text Label 2"},{type:"text",title:"Text Label 3"}]}]});console.group("HTML DEFINITION"),console.log(o),console.log(),console.groupEnd();const r=function i(t={}){if(Array.isArray(t)){const n=[],e=t.length;for(let o=0;o<e;o++){const e=i(t[o]);null!=e&&n.push(e)}return n.join("")}if(t&&"object"==typeof t){const{name:n="div",attributes:e,children:o}=t,l=["<"],r=[n];if(e)for(const i in e){const t=e[i];null!=t&&(""!==t?r.push(`${i}="${t}"`):r.push(i))}return l.push(r.join(" ")),l.push(">"),null!=o&&l.push(i(o)),(o||"div"===n)&&l.push("</",n,">"),l.join("")}return String(t)}(o);document.body.innerHTML=r,console.group("HTML STRING"),console.log(r),console.log(),console.groupEnd(),console.group("INITIALIZERS"),console.log(l),console.log(),console.groupEnd();const s={};console.group("INITIALIZE"),function(i=[],t={}){let e;const o=i.length;for(let l=0;l<o;l++){const o=i[l],{type:r}=o,s=n[r].initialize(o,t);s instanceof Promise&&!e&&(e=Promise.resolve()),e&&(e=e.then((()=>s)))}}(l,s),console.log(),console.groupEnd(),console.group("STATE"),console.log(s),console.log(),console.groupEnd()})();